#include<bits/stdc++.h>
using namespace std;

int N,M;
string s[10000];
int arr[300][300][3][3];			// 0 not go			1 $ 	2 $wall		3 @&$    -1 cant go
int can111 = 0,can222=0;
int xx[4] = {0,1,0,-1};
int yy[4] = {1,0,-1,0};
// left 0 right 1
// not 0 go 1

int dfs(int x,int y,int LR,int breakwall){
	//printf("%d %d %d %d\n",x,y,LR,breakwall);
	if( arr[x][y][LR][breakwall] != 0 ){
		return arr[x][y][LR][breakwall];
	}
	
	if( s[x][y] == '$' && breakwall==1 ){
		arr[x][y][LR][breakwall] = 2;
		return arr[x][y][LR][breakwall];
	}
	else if( s[x][y] == '$' ){
		arr[x][y][LR][breakwall] = 1;
		return arr[x][y][LR][breakwall];
	}
	
	
	int a1=0,a2=0,b1=0,b2=0,b3=0,c1=0,c2=0,c3=0,ccc=0;
	
	if( x+1 < N && s[x+1][y] != '#' ){
		ccc=1;
		a1 = dfs(x+1,y,LR,breakwall);
	}
	
	if( x+1 < N && s[x+1][y] == '#' ){
		if(breakwall == 0){
			a2 = dfs(x+1,y,LR,1);
		}
	}
	if(ccc==0){
		if( LR == 0 ){
			
			if( y-1 >= 0 && s[x][y-1] == '.'){
				b1 = dfs(x,y-1,LR,breakwall);
			}
			if( y-1 >= 0 && s[x][y-1] == '#'){
				if(breakwall == 0){
					b2 = dfs(x,y-1,LR,1);
				}
			}
			if( y == 0 ){
				b3 = dfs(x,y,1,breakwall);
			}
			
		}
		
		if( LR == 1 ){
			
			if( y+1 < M && s[x][y+1] == '.'){
				c1 = dfs(x,y+1,LR,breakwall);
			}
			if( y+1 < M && s[x][y+1] == '#'){
				if(breakwall == 0){
					c2 = dfs(x,y+1,LR,1);
				}
			}
			if( y == M-1 ){
				c3 = dfs(x,y,0,breakwall);
			}
			
		}
	}
	
	int check1=0,check2=0,check3=0;
	if(a1==1 || a2==1 || b1==1 || b2==1 || b3==1 || c1==1 || c2==1 || c3==1){
		check1 = 1;
	}
	if(a1==2 || a2==2 || b1==2 || b2==2 || b3==2 || c1==2 || c2==2 || c3==2){
		check2 = 1;
	}
	/*if(a1==3 || a2==3 || b1==3 || b2==3 || b3==3 || c1==3 || c2==3 || c3==3){
		check3 = 1;
	}
	if(check3 || (check1&&check2) ){
		arr[x][y][LR][breakwall] = 3;
		return arr[x][y][LR][breakwall];
	}*/
	if(check1){
		arr[x][y][LR][breakwall] = 1;
		return arr[x][y][LR][breakwall];
	}
	if(check2){
		arr[x][y][LR][breakwall] = 2;
		return arr[x][y][LR][breakwall];
	}
	
	arr[x][y][LR][breakwall] = -1;
	return arr[x][y][LR][breakwall];
	
}

int main(){
	int count1 = 0,count2 = 0;
	cin >> M >> N;
	string sss;
	for(int i=0;i<M;i++){
		sss.push_back('.');
	}
	for(int i=0;i<N*2;i+=2){
		s[i] = sss;
		cin >> s[i+1];
	}
	cout << "print new\n";
	s[81][35] ='.';
	
	for(int i=1;i<=N*2;i+=2){
		cout << s[i] << "\n";
	}
	//cout<< s[81][35] << "\n";
	
	N *= 2;
	for(int i=0;i<M;i++){
		//printf("0 %d LR = %d\n",i,0);
		int check = 0;
		check = dfs(0,i,0,0);
		if(check==1){
			count1++;
			count2++;
		}
		else{
			printf("0 %d LR = %d \n",i,0);
		}
		if(check==2){
			
			count2++;
		}
		/*if(check==3){
			count1++;
			count2++;
		}*/
		//cout << count1 << " " << count2 << "\n";
		//printf("0 %d LR = %d\n",i,1);
		check = 0;
		check = dfs(0,i,1,0);
		if(check==1){
			count1++;
			count2++;
		}
		else{
			printf("0 %d LR = %d\n",i,1);
		}
		if(check==2){
			
			count2++;
		}
		/*if(check==3){
			count1++;
			count2++;
		}*/
		
	}
	cout << count1 << " " << count2 << "\n";
	
}

/*
12 4 
#####.###.## 
###.#####.## 
#.####.##### 
@##$########

3 3
#.#
#.#
#$#

3 3
...
...
#$#

12 4 
#####.###.## 
###.#####.## 
#.####.##.## 
@##$#####@## 

50 50
.#.##..####.##.######.#.##################.#######
##.###.######..#############.########.#.#.####.###
###.##.##.#.########.#######.#.####.##########.###
######..###.#######..#..##################..######
###.###.##.###..##########.###..####.####.########
#.#########.######..####.#.##.################.##.
###.#####.###.#.####..##############.#####.#####.#
.#########.##.#.########..###.#####.#####.##.#####
#.#####.#####.#####..#.#.#####...#################
#####.######.##..######..###.###.#################
#######.#.##.#####.#####.###.#####.##.#.##########
#..####################.##.########.##.########.##
######..#.#.#.###.##.###.####.###########.########
##.###..###############.####..#######.#####..#####
###.####.#######.###.#####.#.##.######.######..###
#####.########.######.#.##########.##.#######.###.
.####.#.##.#####.#######.###.############.#####.##
.####.########.#####.#######.#######.##.###.##.#.#
##########.####.########..###.############..####.#
#..###########.##.####.#.#######..##############.#
#####.##.###..#######.##.#############.##.###.####
##.####.#########.######...#########.#.###########
#.##.#############.######..#.###.######..###.#####
#######.##.#####.######.#####.########.##..###.##.
##########.#.#.#########...####.######.##.########
..########..#########.######.###.############.###.
#####.#..##############..########.###.####.##.####
#.##.#.####.######.#################..#####.####.#
#.###########.##############.##...#.##.########.##
###.#######.##########..###########.####.##.##.##.
#.##.######..###.#############.###.##.##.######.##
##.############.##.#####.#########.##..#.######.##
.##.##.###.###.####.######.##########.####.#.#####
.#.#################.#####.#..###.####.###.####.##
####.#######.#.#####..##.####.###########.##..####
.###.##########.##.####.######..##########.#.###.#
####.#.###.###.#.#.###########.####.#####.#####.##
##..###.#######.#################..#####.#.######.
#####..#####.#.####.##.############.#.###.########
.########.##.##########.#..########..#############
#######.######.#.####.##..####.##################.
#######..####.###.####.######.#####..#####.##.####
######.##########...######.#######.####.###.######
####.#######.#####.#########..####.####.##.#####.#
########..##########.##.#######.#.#.###.##.#.#####
######.#.########..####.###.######.#.###########.#
#######.##########.#.###.####.##.#############.#.#
#####.#.####.###########.#######.#####.###.######.
.#####.######.####.########..############.##.###.#
#####@######$#####$##@$@##$###############$##@####
*/
